name: IssueOpen

on:
  issues:
    types: [opened, reopened]

jobs:
    build:
      name: Test
      runs-on: ubuntu-latest
      steps:
        - name: Welcome
          uses: peter-evans/create-or-update-comment@v1
          with:
            issue-number: ${{ github.event.issue.number }}
            body: |
              Welcome to HelpDesk
              Please wait a moment
        - name: Checkout helper
          uses: actions/checkout@v2
          with:
            repository: kangwon-naver/hermes
            ref : main
            token : ${{ secrets.LOGIN_INFO }}
        - name: Install dependencies
          run: |
            python -m pip install --upgrade pip
            pip install -r requirements.txt
        - name: Run script
          shell: bash
          env:
            GITHUB_TOKEN: ${{ secrets.LOGIN_INFO }}
          run: |
            python main.py
